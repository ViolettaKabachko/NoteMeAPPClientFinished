{"ast":null,"code":"export const storeTokens = (access, refresh) => {\n  localStorage.setItem(\"access_token\", access);\n  localStorage.setItem(\"refresh_token\", refresh);\n};\nexport const getDataByToken = async route => {\n  const opts = {\n    credentials: \"include\",\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`\n    }\n  };\n  let res = await fetch(route, opts);\n  if (res.status === 200) {\n    return await res.json();\n  } else {}\n  return await res.json();\n};\nexport const sendData = async (url, data, type) => {\n  const opts = {\n    credentials: \"include\",\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(data)\n  };\n  const response = await fetch(url, opts);\n  let res = await response.json();\n  console.log(res);\n  if (type === 'login') storeTokens(res.access_token, res.refresh_token);\n  return res;\n};\nexport const refreshToken = async () => {\n  const opts = {\n    credentials: \"include\",\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('refresh_token')}`\n    }\n  };\n  let res = await fetch('http://127.0.0.1:5000/refresh', opts);\n  if (res.status === 200) {\n    let res_json = await res.json();\n    storeTokens(res_json.access_token);\n  }\n};","map":{"version":3,"names":["storeTokens","access","refresh","localStorage","setItem","getDataByToken","route","opts","credentials","headers","Authorization","getItem","res","fetch","status","json","sendData","url","data","type","method","body","JSON","stringify","response","console","log","access_token","refresh_token","refreshToken","res_json"],"sources":["C:/Users/miham/Desktop/new_proj/React/new-app/src/fetch.js"],"sourcesContent":["export const storeTokens = (access, refresh) => {\r\n    localStorage.setItem(\"access_token\", access)\r\n    localStorage.setItem(\"refresh_token\", refresh)\r\n    \r\n}\r\n\r\nexport const getDataByToken = async (route) => {\r\n    const opts = {\r\n        credentials: \"include\",\r\n        headers: {\r\n        Authorization: `Bearer ${localStorage.getItem('access_token')}`,\r\n        },\r\n    }\r\n    let res = await fetch(route, opts)\r\n    if (res.status === 200) {\r\n        return await res.json()\r\n    }\r\n    else {\r\n\r\n    }\r\n    return await res.json()\r\n}\r\n\r\nexport const sendData = async (url, data, type) => {\r\n    const opts = {\r\n        credentials: \"include\",\r\n        method: \"POST\",\r\n        headers: {\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n    }       \r\n    const response = await fetch(url, opts)\r\n    let res = await response.json();\r\n    console.log(res)\r\n    if (type === 'login')\r\n        storeTokens(res.access_token, res.refresh_token)\r\n    return res\r\n}\r\n\r\nexport const refreshToken = async () => {\r\n    const opts = {\r\n        credentials: \"include\",\r\n        headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('refresh_token')}`\r\n        }\r\n    }\r\n    let res = await fetch('http://127.0.0.1:5000/refresh', opts)\r\n    if (res.status === 200) {\r\n        let res_json = await res.json()\r\n        storeTokens(res_json.access_token, )\r\n    }\r\n}"],"mappings":"AAAA,OAAO,MAAMA,WAAW,GAAGA,CAACC,MAAM,EAAEC,OAAO,KAAK;EAC5CC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEH,MAAM,CAAC;EAC5CE,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEF,OAAO,CAAC;AAElD,CAAC;AAED,OAAO,MAAMG,cAAc,GAAG,MAAOC,KAAK,IAAK;EAC3C,MAAMC,IAAI,GAAG;IACTC,WAAW,EAAE,SAAS;IACtBC,OAAO,EAAE;MACTC,aAAa,EAAG,UAASP,YAAY,CAACQ,OAAO,CAAC,cAAc,CAAE;IAC9D;EACJ,CAAC;EACD,IAAIC,GAAG,GAAG,MAAMC,KAAK,CAACP,KAAK,EAAEC,IAAI,CAAC;EAClC,IAAIK,GAAG,CAACE,MAAM,KAAK,GAAG,EAAE;IACpB,OAAO,MAAMF,GAAG,CAACG,IAAI,EAAE;EAC3B,CAAC,MACI,CAEL;EACA,OAAO,MAAMH,GAAG,CAACG,IAAI,EAAE;AAC3B,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,GAAG,EAAEC,IAAI,EAAEC,IAAI,KAAK;EAC/C,MAAMZ,IAAI,GAAG;IACTC,WAAW,EAAE,SAAS;IACtBY,MAAM,EAAE,MAAM;IACdX,OAAO,EAAE;MACT,cAAc,EAAE;IAChB,CAAC;IACDY,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI;EAC7B,CAAC;EACD,MAAMM,QAAQ,GAAG,MAAMX,KAAK,CAACI,GAAG,EAAEV,IAAI,CAAC;EACvC,IAAIK,GAAG,GAAG,MAAMY,QAAQ,CAACT,IAAI,EAAE;EAC/BU,OAAO,CAACC,GAAG,CAACd,GAAG,CAAC;EAChB,IAAIO,IAAI,KAAK,OAAO,EAChBnB,WAAW,CAACY,GAAG,CAACe,YAAY,EAAEf,GAAG,CAACgB,aAAa,CAAC;EACpD,OAAOhB,GAAG;AACd,CAAC;AAED,OAAO,MAAMiB,YAAY,GAAG,MAAAA,CAAA,KAAY;EACpC,MAAMtB,IAAI,GAAG;IACTC,WAAW,EAAE,SAAS;IACtBC,OAAO,EAAE;MACLC,aAAa,EAAG,UAASP,YAAY,CAACQ,OAAO,CAAC,eAAe,CAAE;IACnE;EACJ,CAAC;EACD,IAAIC,GAAG,GAAG,MAAMC,KAAK,CAAC,+BAA+B,EAAEN,IAAI,CAAC;EAC5D,IAAIK,GAAG,CAACE,MAAM,KAAK,GAAG,EAAE;IACpB,IAAIgB,QAAQ,GAAG,MAAMlB,GAAG,CAACG,IAAI,EAAE;IAC/Bf,WAAW,CAAC8B,QAAQ,CAACH,YAAY,CAAG;EACxC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}